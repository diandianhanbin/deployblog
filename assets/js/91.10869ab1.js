(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{410:function(s,e,t){"use strict";t.r(e);var a=t(0),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("ssh")]),s._v("登录是一个很常见的操作，本次我是制作一个镜像，然后使用"),t("code",[s._v("docker")]),s._v("的"),t("code",[s._v("host")]),s._v("模式来启动"),t("code",[s._v("docker")]),s._v("，因此需要修改"),t("code",[s._v("ssh")]),s._v("的端口，避免与母机端口产生冲突。")]),s._v(" "),t("h2",{attrs:{id:"现象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#现象"}},[s._v("#")]),s._v(" 现象")]),s._v(" "),t("p",[s._v("在实际的操作过后，登录完毕后马上被退出。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sven @ SVENWENG-MB0 in ~/Desktop [16:34:44] C:254\n$ ssh root@xxx -p port\nroot@xxx's password:\nLast login: Tue Nov 19 16:35:13 2019 from xxx\ntest\nConnection to xxx closed.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"解决"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决")]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v('sed -i "s/UsePAM yes/UsePAM no/g" /etc/ssh/sshd_config')]),s._v("命令后重启"),t("code",[s._v("ssh")]),s._v("即可。")]),s._v(" "),t("h2",{attrs:{id:"追因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#追因"}},[s._v("#")]),s._v(" 追因")]),s._v(" "),t("p",[t("code",[s._v("UsePAM")]),s._v("选项是启动"),t("code",[s._v("PAM")]),s._v("验证。")]),s._v(" "),t("blockquote",[t("p",[s._v("PAM 提供四个安全领域的特性，但是应用程序不太可能同时需要所有这些方面。例如，passwd 命令只需要下面列表中的第三组：\naccount 处理账户限制。对于有效的用户，允许他做什么？\nauth 处理用户识别 — 例如，通过输入用户名和密码。\npassword 只处理与密码相关的问题，比如设置新密码。\nsession 处理连接管理，包括日志记录。\n在 /etc/pam.d 目录中为将使用 PAM 的每个应用程序创建一个配置文件，文件名与应用程序名相同。例如，login 命令的配置文件是 /etc/pam.d/login。")])]),s._v(" "),t("p",[s._v("参考文章:"),t("a",{attrs:{href:"https://www.ibm.com/developerworks/cn/aix/library/au-sshlocks/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.ibm.com/developerworks/cn/aix/library/au-sshlocks/index.html"),t("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);