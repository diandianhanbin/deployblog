(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{367:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("使用一个第三方库生成二维码")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("版本相关")]),s._v(" "),a("p",[s._v("操作系统：Mac OS X EI Caption")]),s._v(" "),a("p",[s._v("Python版本：2.7")]),s._v(" "),a("p",[s._v("IDE：Sublime Text 3")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"依赖库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖库"}},[s._v("#")]),s._v(" 依赖库")]),s._v(" "),a("p",[a("code",[s._v("Python")]),s._v("生成二维码需要的依赖库为"),a("code",[s._v("PIL")]),s._v("和"),a("code",[s._v("QRcode")]),s._v("。\n坑爹的是，百度了好久都没有找到"),a("code",[s._v("PIL")]),s._v("，不知道是什么时候改名了，"),a("code",[s._v("pillow")]),s._v("就是传说中的"),a("code",[s._v("PIL")]),s._v("。\n安装命令："),a("code",[s._v("sudo pip install pillow、sudo pip install qrcode")]),s._v("\n验证是否安装成功，使用命令"),a("code",[s._v("from PIL import Image")]),s._v("，就可以验证PIL是否安装成功，"),a("code",[s._v("qrcode")]),s._v("则使用"),a("code",[s._v("import qrcode")]),s._v("，两条命令不报错，就说明依赖的环境已经完毕了。")]),s._v(" "),a("h2",{attrs:{id:"使用qrcode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用qrcode"}},[s._v("#")]),s._v(" 使用qrcode")]),s._v(" "),a("p",[a("code",[s._v("qrcode")]),s._v("使用起来也很简单，代码如下：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" qrcode\n \n \nqr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" qrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("QRCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    error_correction"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("qrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("constants"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ERROR_CORRECT_L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    box_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    border"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nqr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nqr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nimg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" qr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make_image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nimg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("参数 "),a("code",[s._v("version")]),s._v(" 表示生成二维码的尺寸大小，取值范围是 "),a("code",[s._v("1 至 40")]),s._v("，最小尺寸 1 会生成 21 * 21 的二维码，version 每增加 1，生成的二维码就会添加 4 尺寸，例如 version 是 2，则生成 25 * 25 的二维码。\n参数 error_correction 指定二维码的容错系数，分别有以下4个系数：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1.ERROR_CORRECT_L: 7%的字码可被容错\n2.ERROR_CORRECT_M: 15%的字码可被容错\n3.ERROR_CORRECT_Q: 25%的字码可被容错\n4.ERROR_CORRECT_H: 30%的字码可被容错\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("参数 "),a("code",[s._v("box_size")]),s._v(" 表示二维码里每个格子的像素大小。\n参数 "),a("code",[s._v("border")]),s._v(" 表示边框的格子厚度是多少（默认是4）。\n运行代码后，会在代码的当前目录下生成一个"),a("code",[s._v("test.png")]),s._v("的二维码，用手机扫一下就可以看到"),a("code",[s._v("Hello")]),s._v("了。")]),s._v(" "),a("h2",{attrs:{id:"带有logo的二维码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#带有logo的二维码"}},[s._v("#")]),s._v(" 带有logo的二维码")]),s._v(" "),a("p",[s._v("生成这个二维码的原理就是利用PIL库操作"),a("code",[s._v("icon")]),s._v("，把"),a("code",[s._v("icon")]),s._v("放到二维码的正中间。"),a("code",[s._v("PIL")]),s._v("操作没有去了解，就直接使用脚本之家的代码来做事例。")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Image\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" qrcode\n \n \nqr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" qrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("QRCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    error_correction"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("qrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("constants"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ERROR_CORRECT_H"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    box_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    border"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nqr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jb51.net/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nqr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nimg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" qr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("make_image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nimg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("convert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RGBA"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nicon "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"favicon.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nimg_w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" img_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("size\nfactor "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\nsize_w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("img_w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" factor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nsize_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("img_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" factor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nicon_w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("size\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" icon_w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" size_w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    icon_w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" size_w\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" icon_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" size_h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    icon_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" size_h\nicon "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("resize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("icon_w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon_h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ANTIALIAS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nw "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("img_w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" icon_w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("img_h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" icon_h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nimg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("paste"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \nimg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dhqme_qrcode.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);