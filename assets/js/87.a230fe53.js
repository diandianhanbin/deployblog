(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{335:function(e,s,n){"use strict";n.r(s);var a=n(0),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[n("img",{attrs:{src:"https://blog-img-1251534856.cos.ap-guangzhou.myqcloud.com/1537777658817479.jpg",alt:"20160906"}})]),e._v(" "),n("h2",{attrs:{id:"环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[e._v("#")]),e._v(" 环境")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("Mac系统：OS X EI Capitan 10.11.5")]),e._v(" "),n("p",[e._v("Xcode版本：7.3")]),e._v(" "),n("hr"),e._v(" "),n("h2",{attrs:{id:"流程图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#流程图"}},[e._v("#")]),e._v(" 流程图")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://blog-img-1251534856.cos.ap-guangzhou.myqcloud.com/1537777681577566.jpg",alt:""}})]),e._v(" "),n("p",[e._v("图有点歪，不过大概的流程是这么个样子。获取事件的是最上层的元素，如果这个元素没有对应的相应事件，就会往这个元素的父元素传递，元素传递完毕之后，就会传递到UIController，接下来是UIWindow，最后是AppDelegate。如果AppDelegate没有响应，那么就不会响应。")]),e._v(" "),n("h2",{attrs:{id:"代码实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码实现"}},[e._v("#")]),e._v(" 代码实现")]),e._v(" "),n("p",[e._v("上面的流程可以用代码写出来，把日志打出来后进行理解。")]),e._v(" "),n("p",[e._v("新建一些类，"),n("code",[e._v("subView")]),e._v(" "),n("code",[e._v("MainView")]),e._v(" 继承于 "),n("code",[e._v("UIView")]),e._v("。"),n("code",[e._v("VCRoot")]),e._v("继承于"),n("code",[e._v("UIController")]),e._v("。"),n("code",[e._v("MyWindow")]),e._v("继承于"),n("code",[e._v("UIWindow")]),e._v("。整个工程结构大概这样：")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://blog-img-1251534856.cos.ap-guangzhou.myqcloud.com/1537777702241229.jpg",alt:""}})]),e._v(" "),n("h3",{attrs:{id:"appdelegate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#appdelegate"}},[e._v("#")]),e._v(" AppDelegate")]),e._v(" "),n("p",[e._v("首先在"),n("code",[e._v("AppDelegate.m")]),e._v("我们要导入相关包")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('#import "VCRoot.h"\n#import "MyWindow.h"\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("然后添加如下代码：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('-(void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event\n{\n    NSLog(@"AppDelegate 事件响应!next== %@", self.nextResponder);\n    \n    [super touchesBegan:touches withEvent:event];\n}\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n    \n    self.window = [[MyWindow alloc]initWithFrame:[UIScreen mainScreen].bounds];\n    self.window.rootViewController = [[VCRoot alloc]init];\n    [self.window makeKeyAndVisible];\n    \n    \n    return YES;\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br")])]),n("p",[n("code",[e._v("-(void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event")]),e._v("这个方法是监控点击事件，监控到这个事件后会打一个日志出来。")]),e._v(" "),n("p",[n("code",[e._v("didFinishLaunchingWithOptions")]),e._v("这部分的功能是用"),n("code",[e._v("MyWindow")]),e._v("初始化一个视图。设置"),n("code",[e._v("VCRoot")]),e._v("为根视图。")]),e._v(" "),n("h2",{attrs:{id:"vcroot"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vcroot"}},[e._v("#")]),e._v(" VCRoot")]),e._v(" "),n("p",[e._v("在"),n("code",[e._v("VCRoot")]),e._v("中就可以添加方法了。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('- (void)viewDidLoad {\n    [super viewDidLoad];\n    // Do any additional setup after loading the view.\n    \n    _mainView = [[MainView alloc]init];\n    _mainView.frame = CGRectMake(50, 50, 200, 200);\n    _mainView.backgroundColor = [UIColor orangeColor];\n    \n    [self.view addSubview:_mainView];\n    \n    _subView = [[subView alloc]init];\n    _subView.frame = CGRectMake(30, 30, 100, 20);\n    _subView.backgroundColor = [UIColor purpleColor];\n    \n    [_mainView addSubview:_subView];\n    \n    self.view.backgroundColor = [UIColor blueColor];\n    \n    \n    \n}\n\n-(void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event\n{\n    NSLog(@"VCRoot事件响应!next== %@", self.nextResponder);\n    \n    [super touchesBegan:touches withEvent:event];\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br")])]),n("p",[e._v("在这里，我们添加了"),n("code",[e._v("_subView")]),e._v("和"),n("code",[e._v("_mainView")]),e._v("，其中"),n("code",[e._v("_subView")]),e._v("是"),n("code",[e._v("_mainView")]),e._v("的子视图。")]),e._v(" "),n("h3",{attrs:{id:"subview和mainview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subview和mainview"}},[e._v("#")]),e._v(" subView和MainView")]),e._v(" "),n("p",[e._v("在这两部分添加点击事件的代码：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('-(void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event\n{\n    NSLog(@"subView 事件响应! next== %@", self.nextResponder);\n    \n    [super touchesBegan:touches withEvent:event];\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("h3",{attrs:{id:"运行效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行效果"}},[e._v("#")]),e._v(" 运行效果")]),e._v(" "),n("p",[e._v("运行之后，点击"),n("code",[e._v("_subView")]),e._v("，也就是紫色的区块，会打出如下日志：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("2016-09-06 16:32:45.579 事件响应链[79863:6604417] subView 事件响应! next== <MainView: 0x7faf48f3ccb0; frame = (50 50; 200 200); layer = <CALayer: 0x7faf48f034d0>>\n2016-09-06 16:32:45.580 事件响应链[79863:6604417] MainView 事件响应!next== <UIView: 0x7faf48f3aed0; frame = (0 0; 320 568); autoresize = W+H; layer = <CALayer: 0x7faf48f3bac0>>\n2016-09-06 16:32:45.581 事件响应链[79863:6604417] VCRoot事件响应!next== <MyWindow: 0x7faf48c4b050; baseClass = UIWindow; frame = (0 0; 320 568); gestureRecognizers = <NSArray: 0x7faf48f39930>; layer = <UIWindowLayer: 0x7faf48d16bc0>>\n2016-09-06 16:32:45.581 事件响应链[79863:6604417] MyWindow 事件响应next== <UIApplication: 0x7faf48c05f80>\n2016-09-06 16:32:45.581 事件响应链[79863:6604417] AppDelegate 事件响应!next== (null)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("我们可以看到，一个相应的是"),n("code",[e._v("subView")]),e._v("，然后是"),n("code",[e._v("MainView")]),e._v("，这两个是我们定义的"),n("code",[e._v("UIView")]),e._v("，所有我们定义的元素相应结束之后，下一个响应者就是"),n("code",[e._v("VCRoot")]),e._v("，也就是"),n("code",[e._v("UIController")]),e._v("。在这之后是"),n("code",[e._v("MyWindow")]),e._v("也就是"),n("code",[e._v("UIWindow")]),e._v("，最后是"),n("code",[e._v("AppDelegate")]),e._v("。")])])}),[],!1,null,null,null);s.default=t.exports}}]);