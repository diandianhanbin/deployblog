(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{434:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),n("p",[s._v("之前想学习自动化测试的时候，就研究过"),n("code",[s._v("MonkeyRunner")]),s._v("，说实话"),n("code",[s._v("MonkeyRunner")]),s._v("在一定程度上是有局限性的，但是在某些方面解决问题来看，是非常方便的。比如使用Monkey测试的时候，无法很好的控制"),n("code",[s._v("Monkey")]),s._v("的落点。不能保证所有的页面都测到，因此可以使用"),n("code",[s._v("MonkeyRunner")]),s._v("来定制脚本，保证每个"),n("code",[s._v("Activity")]),s._v("都能覆盖。")]),s._v(" "),n("h2",{attrs:{id:"机器环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#机器环境"}},[s._v("#")]),s._v(" 机器环境")]),s._v(" "),n("p",[s._v("其实一开始我是想找一个现成的教程学学，结果发现基本上说的都是Windows环境下，只能自己摸索摸索。")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("版本相关")]),s._v(" "),n("p",[s._v("操作系统：Mac OS X EI Caption")]),s._v(" "),n("p",[s._v("Python版本：2.7")]),s._v(" "),n("p",[s._v("IDE：Sublime Text 3")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"monkeyrunner环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#monkeyrunner环境"}},[s._v("#")]),s._v(" MonkeyRunner环境")]),s._v(" "),n("p",[n("code",[s._v("MonkeyRunner")]),s._v("是"),n("code",[s._v("AndroidSDK")]),s._v("自带的一个东西，在"),n("code",[s._v("SDK")]),s._v("目录中的"),n("code",[s._v("tools")]),s._v("文件夹中，直接带有"),n("code",[s._v("MonkeyRunner")]),s._v("。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://blog-img-1251534856.cos.ap-guangzhou.myqcloud.com/1537976941095854.jpg",alt:"路径"}})]),s._v(" "),n("p",[s._v("这个命令可以直接使用命令行工具的"),n("code",[s._v("open")]),s._v("方法来直接打开命令，会进入"),n("code",[s._v("Jyhon")]),s._v("的命令行:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("SvenWeng@wengyanbindeMacBook-Pro:~/Desktop/android-sdk-macosx/tools"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n⇒  monkeyrunner\nJython "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v(".3 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v(":c56500f08d34+, Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":54:35"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Java HotSpot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Oracle Corporation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on java1.7.0_79\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("在这里直接输入命令：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("android"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("monkeyrunner "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MonkeyRunner\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("没有报错说明MonkeyRunner命令是没问题的，现在需要把MonkeyRunner配置到环境变量中。")]),s._v(" "),n("h3",{attrs:{id:"配置monkeyrunner到环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置monkeyrunner到环境变量"}},[s._v("#")]),s._v(" 配置MonkeyRunner到环境变量")]),s._v(" "),n("p",[s._v("在Mac中，环境变量有好多个，一般来说，我们说的环境变量就是一个配置文件，如果你使用的是Mac的默认命令行终端，那么你用的就是bash，你需要在bash_profile中添加环境变量：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打开文件后，需要输入这些内容：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("}")]),s._v(":/Users/SvenWeng/Desktop/android-sdk-macosx/platform-tools/:/Users/SvenWeng/Desktop/android-sdk-macosx/tools/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("然后保存后关闭文件，需要注意的是，上面的命令配置sdk的路径是我的，你的肯定不一样，需要把路径做一些修改。然后执行:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果你使用的是zsh，那么环境变量就是:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("~/.zshrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("同样的内容放置进去即可。")]),s._v(" "),n("p",[s._v("上面的配置完毕之后打开命令行工具运行"),n("code",[s._v("monkeyrunner")]),s._v("，如果成功的进入了"),n("code",[s._v("Jython")]),s._v("，那么恭喜你，"),n("code",[s._v("MonkeyRunner")]),s._v("的环境已经配置成功。如果失败，请按照上面的方法仔细检查检查。")]),s._v(" "),n("h2",{attrs:{id:"第一个demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一个demo"}},[s._v("#")]),s._v(" 第一个Demo")]),s._v(" "),n("p",[s._v("配置完毕之后，我们需要运行一下脚本检查是否运行成功，"),n("code",[s._v("MonkeyRunner")]),s._v("的API是python的，那么我们就要写一个python的demo。")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("android"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("monkeyrunner "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MonkeyRunner "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" mr\n\ndevice "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("waitForConnection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" device"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\tdevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("startActivity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("component"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.weizq/com.zztzt.android.simple.app.MainActivity'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("上面代码中，"),n("code",[s._v("startActivity")]),s._v("方法中需要填入你需要启动的"),n("code",[s._v("Activity")]),s._v("。请使用adb或者咨询开发拿到相关"),n("code",[s._v("Activity")]),s._v("名称。")]),s._v(" "),n("h3",{attrs:{id:"运行demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行demo"}},[s._v("#")]),s._v(" 运行demo")]),s._v(" "),n("p",[s._v("运行的方法很简单，命令是"),n("code",[s._v("monkeyrunner")]),s._v(" + py文件的路径，比如我这样：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("monkeyrunner test.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("我直接用文件名是因为我已经把"),n("code",[s._v("shell")]),s._v("的路径进到和文件同一层级了，如果不在同一层级，可以使用绝对路径。")])])}),[],!1,null,null,null);a.default=t.exports}}]);