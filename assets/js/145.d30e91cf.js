(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{350:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("在开发的过程中，很可能经常需要记录一些日志，这些日志一般来说需要定时的发送到自己的邮箱，让自己能够随时监控程序的状态。")]),s._v(" "),a("p",[s._v("之前我写过一个一次性使用的，但是发现工作中经常会用到这个功能，那么能不能写一个通用的模块，放到Python的系统目录，每次需要使用的时候，只要导入包调用它就行了呢？")]),s._v(" "),a("h2",{attrs:{id:"环境和思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境和思路"}},[s._v("#")]),s._v(" 环境和思路")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("操作系统：Mac OS X EI Caption")]),s._v(" "),a("p",[s._v("Python版本：2.7")]),s._v(" "),a("p",[s._v("IDE：Pycharm")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("思路其实很简单，整个书写的过程就是先按照面向过程的方法一步一步写代码，先把功能实现了，再对功能进行封装。")]),s._v(" "),a("h2",{attrs:{id:"开始写方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始写方法"}},[s._v("#")]),s._v(" 开始写方法")]),s._v(" "),a("h3",{attrs:{id:"导入依赖的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入依赖的包"}},[s._v("#")]),s._v(" 导入依赖的包")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" smtplib\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("text "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MIMEText\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"书写的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#书写的方法"}},[s._v("#")]),s._v(" 书写的方法")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("msgtype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html'")]),s._v("\nmailto_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx@qq.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmail_host "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp.163.com"')]),s._v("\nmail_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx@163.com"')]),s._v("\nmail_pwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n\t\t\nme "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"点点寒彬|SvenWeng"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" mail_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('">"')]),s._v("\nmsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MIMEText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<h1>Hello World!</h1>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _subtype"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("msgtype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _charset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Subject'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" theme\nmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'From'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" me\nmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'To'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mailto_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\ts "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" smtplib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SMTP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mail_host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接smtp服务器")]),s._v("\n\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mail_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mail_pwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登陆服务器")]),s._v("\n\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sendmail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mailto_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("as_string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送邮件")]),s._v("\n\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("几个比较重要的点。")]),s._v(" "),a("ul",[a("li",[s._v("协议是使用smtp协议发送的，理论上所有支持这个协议的邮箱都适用，我是用163邮箱来作为发件箱")]),s._v(" "),a("li",[s._v("收件人的数据类型是一个列表，在日常使用的过程中，我们很可能需要发送给多个人邮件，因此我们需要将它作为列表")]),s._v(" "),a("li",[s._v('me字段表示发件人信息，分为两部分，第一部分是展示的名字，比如我这里展示为u"点点寒彬|SvenWeng"，第二部分是你的发件箱地址，这里当然可以随意填一个地址，但是在某些收件客户端（比如QQ邮箱）就会提示你这个发件人有问题，所以这里我建议和发件箱地址一致。')])]),s._v(" "),a("p",[s._v("接下来发送的方法就没什么好说了，就是固定的格式，照着写就行了，直接运行，收件箱应该能够正常的收到这封测试邮件。")]),s._v(" "),a("h2",{attrs:{id:"封装成类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#封装成类"}},[s._v("#")]),s._v(" 封装成类")]),s._v(" "),a("p",[s._v("想要做成通用的类，那么必须要按照面向对象的方法重新规划成类。直接上代码：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ecoding=utf-8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Author: 点点寒彬 | Sven_Weng")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Email : diandianhanbin@gmail.com")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" smtplib\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("text "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MIMEText\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyNetEastMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n\t入参msgtype\n\tmsgtype:{普通文本:plain},{html:html}\n\t"""')]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" msgtype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n\t\t初始化入参\n\t\t:param msgtype: {普通文本:plain},{html:html}\n\t\t"""')]),s._v("\n\t\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_msgtype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" msgtype\n\t\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mailto_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx@qq.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_host "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp.163.com"')]),s._v("\n\t\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx@163.com"')]),s._v("\n\t\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_pwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMailByNetEastMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n\t\t发送邮件\n\t\t:param content:邮件正文内容,可以是html,也可以是文本\n\t\t:param theme: 邮件的主体\n\t\t:return: True or False\n\t\t"""')]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("checkInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"入参输入错误,请检查msgtype,只能是plain或者html"')]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\t\tme "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"翁彦彬|SvenWeng"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('">"')]),s._v("\n\t\tmsg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MIMEText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _subtype"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_msgtype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" _charset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Subject'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" theme\n\t\tmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'From'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" me\n\t\tmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'To'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mailto_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\ts "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" smtplib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SMTP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接smtp服务器")]),s._v("\n\t\t\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mail_pwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登陆服务器")]),s._v("\n\t\t\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sendmail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("me"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_mailto_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("as_string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送邮件")]),s._v("\n\t\t\ts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_msgtype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_msgtype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\tsdml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyNetEastMail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'plain'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tsdml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sendMailByNetEastMail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<h1>test</h1>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zhuticeshi"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br")])]),a("p",[s._v("还是那么几个注意的点：")]),s._v(" "),a("ul",[a("li",[s._v("可以根据自己的需要做不同的封装，我这里吧发件邮箱和收件邮箱等信息全部都写死了，读者可以根据需要做一个配置文件或者其他方式获取，这取决于你的需求。")]),s._v(" "),a("li",[s._v("方法有两种，一种是普通文本，另一种是html方式，两种方式的区别只在于_subtype的取值，html就表示html，plain表示普通文本，我在类里面做了说明，因此在初始化的时候要给一个类型。")]),s._v(" "),a("li",[s._v("把文本类型剥离出来之后，在调用发送方法之前，要做一下检查，所以有了checkInstance方法。")])]),s._v(" "),a("h2",{attrs:{id:"放到系统目录下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#放到系统目录下"}},[s._v("#")]),s._v(" 放到系统目录下")]),s._v(" "),a("p",[s._v("这里涉及到Python的导入机制。当import一个包时，Python会先查找系统级别目录下的所有包，如果没有，再查找import路径的包，如果都没有则报错。")]),s._v(" "),a("p",[s._v("所以根据上面的条件，我们需要把我们写好的包放到系统级别的目录中。")]),s._v(" "),a("p",[s._v("PS：Python的包需要放在一个文件夹中，并且必须有__init__.py。否则不算一个Python包")]),s._v(" "),a("p",[s._v("在交互模式下输入如下命令：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\nsys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("命令行会输出以下内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/node-0.9.16-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/zope.component-4.2.2-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/zope.deprecation-4.1.2-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/zope.lifecycleevent-4.1.0-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/plumber-1.3.1-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/odict-1.5.1-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/zope.event-4.1.0-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/npm-0.1.1-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/optional_django-0.1.0-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/autopep8-1.2.2-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages/pep8-1.7.0-py2.7.egg'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/Library/Python/2.7/site-packages'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样打出来的列表，就是Python系统级别的目录，import的时候会优先在这些目录下寻找，所以我们只要把我们的包放到这里就行了。")]),s._v(" "),a("h2",{attrs:{id:"在交互命令行中测试是否成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在交互命令行中测试是否成功"}},[s._v("#")]),s._v(" 在交互命令行中测试是否成功")]),s._v(" "),a("p",[s._v("在我们的交互命令后中输入python进入命令行页面，只要导入不报错，我们就可以在任意的脚本中直接引用我们写好的这个模块了。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(">>> from NetEastMail import NetEastMail\n>>> nem = NetEastMail('html')\n>>> nem = NetEastMail.MyNetEastMail('html')\n>>> nem.sendMailByNetEastMail(\"<h1>test</h1>\", \"zhuticeshi\")\nTrue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("这样我就收到测试邮件了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://blog-img-1251534856.cos.ap-guangzhou.myqcloud.com/1537976833306109.jpg",alt:"邮件"}})]),s._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[s._v("#")]),s._v(" 最后")]),s._v(" "),a("p",[s._v("当然，还有一些功能没有补上，比如发送带有图片的邮件，带有附件的文件，读者可以根据自己的需要去重新写一个方法，封装到这个类中，这样你就开发了一个属于你自己的发邮件模块了。")])])}),[],!1,null,null,null);t.default=e.exports}}]);